name: Accessibility & Launch Readiness Check

on:
  workflow_dispatch:
  pull_request:
  schedule:
    - cron: "0 14 * * 1" # Mondays 10:00 AM ET (14:00 UTC)

permissions:
  contents: read

jobs:
  Accessibility:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Verify accessibility documentation
        shell: bash
        run: |
          set -u
          echo "Running accessibility checks..."

          # Check for accessibility documentation
          if [[ ! -f "accessibility.md" ]]; then
            echo "::error title=Missing file::accessibility.md"
            exit 1
          else
            echo "OK: accessibility.md"
          fi

          echo "Accessibility check completed."

  Launch:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Verify launch readiness
        shell: bash
        run: |
          set -u
          echo "Running launch readiness checks..."

          # Files expected at repo root for launch
          files=(
            "index.html"
            "README.md"
            "SECURITY.md"
          )

          for f in "${files[@]}"; do
            if [[ ! -f "$f" ]]; then
              echo "::warning title=Missing file::$f"
            else
              echo "OK: $f"
            fi
          done

          # Folders you may or may not have yet (warnings only)
          dirs=("text" "dashboard" "reports" "series")
          for d in "${dirs[@]}"; do
            if [[ ! -e "$d" ]]; then
              echo "::warning title=Missing path::$d"
            else
              echo "OK: $d"
            fi
          done

          echo "Launch readiness check completed."

